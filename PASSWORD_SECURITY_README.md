# üîí –ë–µ–∑–ø–µ—á–Ω–∞ –°–∏—Å—Ç–µ–º–∞ –ó–º—ñ–Ω–∏ –ü–∞—Ä–æ–ª—è

## –û–≥–ª—è–¥

–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –∑–∞—Ö–∏—â–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–º—ñ–Ω–∏ –ø–∞—Ä–æ–ª—è –∑:
- ‚úÖ **bcrypt —Ö–µ—à—É–≤–∞–Ω–Ω—è–º** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ Supabase)
- ‚úÖ **–ó–∞—Ö–∏—Å—Ç–æ–º –≤—ñ–¥ SQL-—ñ–Ω'—î–∫—Ü—ñ–π** (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω—ñ –∑–∞–ø–∏—Ç–∏)
- ‚úÖ **Rate limiting** (–∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –±—Ä—É—Ç—Ñ–æ—Ä—Å—É)
- ‚úÖ **–ê—É–¥–∏—Ç –ª–æ–≥—É–≤–∞–Ω–Ω—è–º** (—ñ—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω)
- ‚úÖ **–í–∞–ª—ñ–¥–∞—Ü—ñ—î—é —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ –ø–∞—Ä–æ–ª—è**
- ‚úÖ **–í—ñ–∑—É–∞–ª—å–Ω–∏–º —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –±–µ–∑–ø–µ–∫–∏**

---

## üöÄ –®–≤–∏–¥–∫–∏–π –°—Ç–∞—Ä—Ç

### 1. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ SQL —Ñ—É–Ω–∫—Ü—ñ—ó (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –í–∏–∫–æ–Ω–∞—Ç–∏ –≤ Supabase SQL Editor
psql -h db.xxx.supabase.co -U postgres -d postgres -f supabase_password_security.sql
```

–ê–±–æ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –≤–º—ñ—Å—Ç `supabase_password_security.sql` –≤ SQL Editor –Ω–∞ Supabase Dashboard.

### 2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–∂–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –≤ Profile.tsx

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –ø—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ - —Å–µ–∫—Ü—ñ—è "–ó–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—è" –≤–∂–µ –¥–æ—Å—Ç—É–ø–Ω–∞.

---

## üìã –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Å–≤—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å
2. –ü—Ä–æ–∫—Ä—É—Ç—ñ—Ç—å –¥–æ —Å–µ–∫—Ü—ñ—ó "–ó–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—è"
3. –í–≤–µ–¥—ñ—Ç—å –ø–æ—Ç–æ—á–Ω–∏–π –ø–∞—Ä–æ–ª—å
4. –í–≤–µ–¥—ñ—Ç—å –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å (–º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –≤–∏–º–æ–≥–∏):
   - –ú—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤
   - –ú—ñ–Ω—ñ–º—É–º 1 –≤–µ–ª–∏–∫–∞ –ª—ñ—Ç–µ—Ä–∞ (A-Z)
   - –ú—ñ–Ω—ñ–º—É–º 1 –º–∞–ª–∞ –ª—ñ—Ç–µ—Ä–∞ (a-z)
   - –ú—ñ–Ω—ñ–º—É–º 1 —Ü–∏—Ñ—Ä–∞ (0-9)
   - –ú—ñ–Ω—ñ–º—É–º 1 —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª (!@#$%^&*...)
5. –ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å
6. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å"

### –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ:

- üî¥ **–°–ª–∞–±–∫–∏–π** (0-40%): –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ —Å–∏–º–≤–æ–ª—ñ–≤ –∞–±–æ —Ç–∏–ø—ñ–≤
- üü° **–°–µ—Ä–µ–¥–Ω—ñ–π** (40-70%): –•–æ—Ä–æ—à–∏–π –ø–∞—Ä–æ–ª—å, –∞–ª–µ –º–æ–∂–Ω–∞ –ø–æ–∫—Ä–∞—â–∏—Ç–∏
- üü¢ **–°–∏–ª—å–Ω–∏–π** (70-100%): –í—ñ–¥–º—ñ–Ω–Ω–∏–π –ø–∞—Ä–æ–ª—å

---

## üîê –¢–µ—Ö–Ω—ñ—á–Ω–∞ –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

### –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —Å—Ç–æ—Ä–æ–Ω–∞ (React):

```typescript
// 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ä–æ–≥–æ –ø–∞—Ä–æ–ª—è
const { error: signInError } = await supabase.auth.signInWithPassword({
  email: user.email,
  password: currentPassword,
});

// 2. –ó–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ bcrypt —Ö–µ—à—É–≤–∞–Ω–Ω—è)
const { error: updateError } = await supabase.auth.updateUser({
  password: newPassword,
});
```

### –°–µ—Ä–≤–µ—Ä–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–∞ (PostgreSQL):

```sql
-- –õ–æ–≥—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–∏ –ø–∞—Ä–æ–ª—è
SELECT log_password_change('192.168.1.1', 'Mozilla/5.0...');

-- –ü–µ—Ä–µ–≥–ª—è–¥ —ñ—Å—Ç–æ—Ä—ñ—ó
SELECT * FROM get_my_password_history();

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤
SELECT * FROM admin_get_password_stats();
```

---

## üõ°Ô∏è –ë–µ–∑–ø–µ–∫–∞

### 1. –•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤

- **–ê–ª–≥–æ—Ä–∏—Ç–º**: bcrypt (Blowfish cipher)
- **Cost Factor**: 10 (2^10 = 1024 —ñ—Ç–µ—Ä–∞—Ü—ñ–π)
- **Salt**: –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
- **–ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è**: –¢—ñ–ª—å–∫–∏ —Ö–µ—à, –ù–Ü–ö–û–õ–ò plaintext

**–ü—Ä–∏–∫–ª–∞–¥ —Ö–µ—à—É:**
```
$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy
 ‚îÇ  ‚îÇ  ‚îÇ                            ‚îÇ
 ‚îÇ  ‚îÇ  ‚îî‚îÄ Salt (22 —Å–∏–º–≤–æ–ª–∏)        ‚îî‚îÄ Hash (31 —Å–∏–º–≤–æ–ª)
 ‚îÇ  ‚îî‚îÄ Cost Factor
 ‚îî‚îÄ –í–µ—Ä—Å—ñ—è bcrypt
```

### 2. –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ SQL-—ñ–Ω'—î–∫—Ü—ñ–π

‚úÖ **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω—ñ –∑–∞–ø–∏—Ç–∏**:
```typescript
// –ë–µ–∑–ø–µ—á–Ω–æ (Supabase SDK)
await supabase.auth.updateUser({ password: newPassword });

// –ù–ï–ë–ï–ó–ü–ï–ß–ù–û (–ù–Ü–ö–û–õ–ò —Ç–∞–∫ –Ω–µ —Ä–æ–±—ñ—Ç—å!)
await supabase.rpc('update_password', { sql: `UPDATE ... SET password = '${password}'` });
```

‚úÖ **Prepared Statements** –Ω–∞ —Ä—ñ–≤–Ω—ñ PostgreSQL
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –µ–∫—Ä–∞–Ω—É–≤–∞–Ω–Ω—è** —á–µ—Ä–µ–∑ Supabase SDK

### 3. Rate Limiting (–ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –±—Ä—É—Ç—Ñ–æ—Ä—Å—É)

```sql
-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Å–ø—Ä–æ–±–æ—é –≤—Ö–æ–¥—É
SELECT check_password_attempts('user@example.com', '192.168.1.1');

-- –Ø–∫—â–æ –±—ñ–ª—å—à–µ 5 –Ω–µ–≤–¥–∞–ª–∏—Ö —Å–ø—Ä–æ–± –∑–∞ 15 —Ö–≤–∏–ª–∏–Ω:
{
  "allowed": false,
  "message": "–ó–∞–±–∞–≥–∞—Ç–æ –Ω–µ–≤–¥–∞–ª–∏—Ö —Å–ø—Ä–æ–±. –°–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ 15 —Ö–≤–∏–ª–∏–Ω",
  "attempts": 6,
  "lockout_until": "2024-01-20T14:30:00Z"
}
```

### 4. HTTPS/TLS

- ‚úÖ –í—Å—ñ –∑–∞–ø–∏—Ç–∏ –¥–æ Supabase —á–µ—Ä–µ–∑ HTTPS
- ‚úÖ TLS 1.2+ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
- ‚úÖ Certificate pinning (–≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ)

### 5. Row Level Security (RLS)

```sql
-- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –±–∞—á–∞—Ç—å —Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó –ª–æ–≥–∏
CREATE POLICY "Users can view their own password logs"
  ON password_change_logs
  FOR SELECT
  USING (auth.uid() = user_id);

-- –ê–¥–º—ñ–Ω–∏ –º–∞—é—Ç—å –ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø
CREATE POLICY "Admins can view all password logs"
  ON password_change_logs
  FOR SELECT
  USING (is_admin(auth.uid()));
```

---

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ê—É–¥–∏—Ç

### –ü–µ—Ä–µ–≥–ª—è–¥ —ñ—Å—Ç–æ—Ä—ñ—ó –∑–º—ñ–Ω (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á):

```typescript
const { data } = await supabase
  .from('password_change_logs')
  .select('changed_at, ip_address')
  .eq('user_id', user.id)
  .order('changed_at', { ascending: false })
  .limit(10);
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤:

```typescript
const { data } = await supabase.rpc('admin_get_password_stats');

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
{
  "success": true,
  "stats": {
    "total_changes": 156,
    "changes_today": 12,
    "changes_this_week": 47,
    "failed_attempts_24h": 3
  }
}
```

---

## üé® UI/UX Features

### 1. –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- ‚ùå –ß–µ—Ä–≤–æ–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ –≤–∏–º–æ–≥–∞–º
- ‚úÖ –ó–µ–ª–µ–Ω—ñ –≥–∞–ª–æ—á–∫–∏ –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–∏—Ö –ø–æ–ª—ñ–≤

### 2. –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ
- –ü—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä –∑ –∫–æ–ª—å–æ—Ä–æ–≤–æ—é —ñ–Ω–¥–∏–∫–∞—Ü—ñ—î—é
- –¢–µ–∫—Å—Ç–æ–≤—ñ –ø—ñ–¥–∫–∞–∑–∫–∏ (–°–ª–∞–±–∫–∏–π/–°–µ—Ä–µ–¥–Ω—ñ–π/–°–∏–ª—å–Ω–∏–π)

### 3. –ü–æ–∫–∞–∑/–ø—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è
- –Ü–∫–æ–Ω–∫–∏ üëÅÔ∏è / üëÅÔ∏è‚Äçüó®Ô∏è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ–ª—è
- Toggle –¥–ª—è –≤—Å—ñ—Ö —Ç—Ä—å–æ—Ö –ø–æ–ª—ñ–≤

### 4. –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∏–π –±–ª–æ–∫
- üîí –ü–æ—è—Å–Ω–µ–Ω–Ω—è –ø—Ä–æ –±–µ–∑–ø–µ–∫—É
- –°–ø–∏—Å–æ–∫ –∑–∞—Ö–∏—Å–Ω–∏—Ö –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤

### 5. –°—Ç–∞–Ω–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- –ö–Ω–æ–ø–∫–∞ disabled –ø—ñ–¥ —á–∞—Å –æ–±—Ä–æ–±–∫–∏
- –¢–µ–∫—Å—Ç "–ó–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—è..." –ø—ñ–¥ —á–∞—Å –∑–∞–ø–∏—Ç—É

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

1. **–¢–µ—Å—Ç –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó:**
   ```
   –ü–æ—Ç–æ—á–Ω–∏–π: (–ø–æ—Ä–æ–∂–Ω—î) ‚Üí "–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –ø–æ–ª—è"
   –ù–æ–≤–∏–π: "123" ‚Üí "–ú—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤"
   –ù–æ–≤–∏–π: "password" ‚Üí "–ú—ñ–Ω—ñ–º—É–º 1 –≤–µ–ª–∏–∫–∞ –ª—ñ—Ç–µ—Ä–∞"
   –ù–æ–≤–∏–π: "Password123" ‚Üí "–ú—ñ–Ω—ñ–º—É–º 1 —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª"
   ```

2. **–¢–µ—Å—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞—Ä–æ–≥–æ –ø–∞—Ä–æ–ª—è:**
   ```
   –ü–æ—Ç–æ—á–Ω–∏–π: "wrongpassword" ‚Üí "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ç–æ—á–Ω–∏–π –ø–∞—Ä–æ–ª—å"
   ```

3. **–¢–µ—Å—Ç —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è:**
   ```
   –ù–æ–≤–∏–π: "Pass123!@#"
   –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è: "Pass123!@" ‚Üí "–ü–∞—Ä–æ–ª—ñ –Ω–µ —Å–ø—ñ–≤–ø–∞–¥–∞—é—Ç—å"
   ```

4. **–¢–µ—Å—Ç —É—Å–ø—ñ—à–Ω–æ—ó –∑–º—ñ–Ω–∏:**
   ```
   –ü–æ—Ç–æ—á–Ω–∏–π: (–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π)
   –ù–æ–≤–∏–π: "SecurePass123!@#"
   –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è: "SecurePass123!@#"
   ‚Üí ‚úÖ "–ü–∞—Ä–æ–ª—å —É—Å–ø—ñ—à–Ω–æ –∑–º—ñ–Ω–µ–Ω–æ!"
   ```

### SQL-—ñ–Ω'—î–∫—Ü—ñ—ó —Ç–µ—Å—Ç:

```typescript
// –°–ø—Ä–æ–±–∞ —ñ–Ω'—î–∫—Ü—ñ—ó (–±—É–¥–µ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∞)
const maliciousPassword = "'; DROP TABLE users; --";
await supabase.auth.updateUser({ password: maliciousPassword });
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–∞—Ä–æ–ª—å —Ö–µ—à—É—î—Ç—å—Å—è —è–∫ –∑–≤–∏—á–∞–π–Ω–∏–π —Ä—è–¥–æ–∫, SQL –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è
```

---

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–∞ –≤–∏–º–æ–≥ –¥–æ –ø–∞—Ä–æ–ª—è:

–£ `src/components/PasswordChange.tsx`:

```typescript
const validatePassword = (password: string) => {
  const errors: string[] = [];
  
  // –ó–º—ñ–Ω—ñ—Ç—å —Ü—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞ –ø–æ—Ç—Ä–µ–±–∏:
  if (password.length < 8) errors.push('–ú—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤'); // –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞
  if (!/[A-Z]/.test(password)) errors.push('–í–µ–ª–∏–∫–∞ –ª—ñ—Ç–µ—Ä–∞'); // –û–±–æ–≤'—è–∑–∫–æ–≤–∞ –≤–µ–ª–∏–∫–∞
  if (!/[0-9]/.test(password)) errors.push('–¶–∏—Ñ—Ä–∞'); // –û–±–æ–≤'—è–∑–∫–æ–≤–∞ —Ü–∏—Ñ—Ä–∞
  
  return errors;
};
```

### –ó–º—ñ–Ω–∞ rate limiting:

–£ `supabase_password_security.sql`:

```sql
-- –ó–º—ñ–Ω–∏—Ç–∏ –ª—ñ–º—ñ—Ç —Å–ø—Ä–æ–± —Ç–∞ —á–∞—Å –±–ª–æ–∫—É–≤–∞–Ω–Ω—è:
WHERE attempted_at > NOW() - INTERVAL '15 minutes' -- –ü–µ—Ä—ñ–æ–¥ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
AND v_attempts_count >= 5 -- –ú–∞–∫—Å–∏–º—É–º —Å–ø—Ä–æ–±
v_lockout_until := v_last_attempt + INTERVAL '15 minutes'; -- –ß–∞—Å –±–ª–æ–∫—É–≤–∞–Ω–Ω—è
```

---

## üìö API Reference

### Client-side Functions:

```typescript
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç
<PasswordChange onSuccess={() => console.log('–ó–º—ñ–Ω–µ–Ω–æ!')} />

// Props:
interface PasswordChangeProps {
  onSuccess?: () => void; // Callback –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –∑–º—ñ–Ω–∏
}
```

### Server-side Functions:

```sql
-- –õ–æ–≥—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–∏
log_password_change(ip_address TEXT, user_agent TEXT) ‚Üí JSONB

-- –Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω
get_my_password_history() ‚Üí TABLE(changed_at, ip_address, user_agent)

-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ rate limit
check_password_attempts(email TEXT, ip_address TEXT) ‚Üí JSONB

-- –õ–æ–≥—É–≤–∞–Ω–Ω—è —Å–ø—Ä–æ–±–∏
log_password_attempt(email TEXT, ip_address TEXT, success BOOLEAN) ‚Üí VOID

-- –ê–¥–º—ñ–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
admin_get_password_stats() ‚Üí JSONB

-- –ê–¥–º—ñ–Ω –ª–æ–≥ —Å–∫–∏–¥–∞–Ω–Ω—è
admin_log_password_reset(target_user_id UUID, admin_note TEXT) ‚Üí JSONB
```

---

## üêõ Troubleshooting

### "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ç–æ—á–Ω–∏–π –ø–∞—Ä–æ–ª—å" (–∞–ª–µ –ø–∞—Ä–æ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π):

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ email –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
- –°–ø—Ä–æ–±—É–π—Ç–µ –≤–∏–π—Ç–∏ —Ç–∞ —É–≤—ñ–π—Ç–∏ –∑–Ω–æ–≤—É

### –ü–∞—Ä–æ–ª—å –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è:

```typescript
// –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ —î –ø–æ–º–∏–ª–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ
const { data, error } = await supabase.auth.updateUser({ password: newPassword });
console.log('Error:', error);
console.log('Data:', data);
```

### Rate limiting —Å–ø—Ä–∞—Ü—é–≤–∞–≤ –ø–æ–º–∏–ª–∫–æ–≤–æ:

```sql
-- –û—á–∏—Å—Ç–∏—Ç–∏ –ª–æ–≥–∏ —Å–ø—Ä–æ–± –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
DELETE FROM password_attempt_logs WHERE email = 'user@example.com';
```

### SQL —Ñ—É–Ω–∫—Ü—ñ—ó –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –≤–∏–∫–æ–Ω–∞–Ω–æ `supabase_password_security.sql`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –≤–≤—ñ–º–∫–Ω–µ–Ω–æ RLS: `ALTER TABLE password_change_logs ENABLE ROW LEVEL SECURITY;`
3. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏ PostgreSQL –¥–ª—è –ø–æ–º–∏–ª–æ–∫

---

## üöÄ Deployment Checklist

- [ ] –í–∏–∫–æ–Ω–∞–Ω–æ `supabase_password_security.sql` –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ
- [ ] –£–≤—ñ–º–∫–Ω–µ–Ω–æ HTTPS (Supabase –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
- [ ] –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ rate limiting
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ RLS –ø–æ–ª—ñ—Ç–∏–∫–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –≤—Å—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –∑–º—ñ–Ω–∏ –ø–∞—Ä–æ–ª—è
- [ ] –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –Ω–µ–≤–¥–∞–ª–∏—Ö —Å–ø—Ä–æ–±
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –≥–æ—Ç–æ–≤–∞

---

## üìñ –î–æ–¥–∞—Ç–∫–æ–≤—ñ –†–µ—Å—É—Ä—Å–∏

- [Supabase Auth Docs](https://supabase.com/docs/guides/auth)
- [bcrypt Wikipedia](https://en.wikipedia.org/wiki/Bcrypt)
- [OWASP Password Storage](https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html)
- [PostgreSQL Security](https://www.postgresql.org/docs/current/sql-security.html)

---

## üìù Changelog

### v1.0.0 (2024-01-20)
- ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –±–∞–∑–æ–≤—É –∑–º—ñ–Ω—É –ø–∞—Ä–æ–ª—è
- ‚úÖ –î–æ–¥–∞–Ω–æ bcrypt —Ö–µ—à—É–≤–∞–Ω–Ω—è (—á–µ—Ä–µ–∑ Supabase)
- ‚úÖ –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ SQL-—ñ–Ω'—î–∫—Ü—ñ–π
- ‚úÖ Rate limiting
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ –ø–∞—Ä–æ–ª—è
- ‚úÖ –í—ñ–∑—É–∞–ª—å–Ω–∏–π —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –±–µ–∑–ø–µ–∫–∏
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –∞—É–¥–∏—Ç
- ‚úÖ RLS –ø–æ–ª—ñ—Ç–∏–∫–∏
- ‚úÖ –ê–¥–º—ñ–Ω —Ñ—É–Ω–∫—Ü—ñ—ó

---

## ü§ù Contributing

–Ø–∫—â–æ –∑–Ω–∞–π–¥–µ—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –±–µ–∑–ø–µ–∫–∏ - –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –æ–¥—Ä–∞–∑—É.

---

## üìß Support

Email: fareinheitsgithub@gmail.com

---

**–õ—ñ—Ü–µ–Ω–∑—ñ—è:** MIT  
**–ê–≤—Ç–æ—Ä:** Fareinheits MC Courses  
**–í–µ—Ä—Å—ñ—è:** 1.0.0
