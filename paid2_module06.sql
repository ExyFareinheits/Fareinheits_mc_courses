-- =====================================================
-- –ú–û–î–£–õ–¨ 1, –£–†–û–ö 5: –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è - –∫—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º
-- =====================================================
-- –ö—É—Ä—Å: paid-2 (–Ü–¥–µ–∞–ª—å–Ω–∞ –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è Minecraft –°–µ—Ä–≤–µ—Ä–∞)

DO $$
DECLARE
  v_module_id TEXT;
  v_lesson_id TEXT;
BEGIN
  SELECT id::text INTO v_module_id 
  FROM course_modules 
  WHERE course_id = 'paid-2' AND order_index = 1;
  
  v_lesson_id := gen_random_uuid()::text;
  
  DELETE FROM course_lessons 
  WHERE module_id = v_module_id AND order_index = 5;
  
  INSERT INTO course_lessons (
    course_id, module_id, lesson_id, title, type, content, duration, order_index, is_free_preview
  ) VALUES (
    'paid-2',
    v_module_id,
    v_lesson_id,
    '–ü—Ä–∞–∫—Ç–∏–∫–∞: –æ–ø—Ç–∏–º—ñ–∑—É—î–º–æ —Ä–µ–∞–ª—å–Ω–∏–π —Å–µ—Ä–≤–µ—Ä',
    'text',
    '# –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è: –≤—ñ–¥ –ê –¥–æ –Ø

## üéØ –©–æ –º–∏ –±—É–¥–µ–º–æ —Ä–æ–±–∏—Ç–∏

–£ —Ü—å–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ **–∫—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º** –æ–ø—Ç–∏–º—ñ–∑—É—î–º–æ —Ä–µ–∞–ª—å–Ω–∏–π —Å–µ—Ä–≤–µ—Ä:
- –ü–æ—á–∞—Ç–∫–æ–≤–∏–π TPS: 16.8
- –ö—ñ–Ω—Ü–µ–≤–∏–π TPS: 19.7+
- –ë–µ–∑ –≤—Ç—Ä–∞—Ç–∏ –≥–µ–π–º–ø–ª–µ—é!

–í–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ **–≥–æ—Ç–æ–≤—ñ –∫–æ–Ω—Ñ—ñ–≥–∏** —è–∫—ñ –º–æ–∂–Ω–∞ copy-paste.

## üìä –í–∏—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ (–ø—Ä–∏–∫–ª–∞–¥ —Å–µ—Ä–≤–µ—Ä–∞)

```
–°–µ—Ä–≤–µ—Ä: Paper 1.20.1
–ì—Ä–∞–≤—Ü—ñ–≤: 45 –æ–Ω–ª–∞–π–Ω (–ø—ñ–∫ 70)
RAM: 16GB
CPU: Intel Xeon E5-2680 v4
–ü–ª–∞–≥—ñ–Ω–∏: 28 –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
–°–≤—ñ—Ç–∏: world, world_nether, world_the_end

–ü–æ—á–∞—Ç–∫–æ–≤—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏:
/spark tps ‚Üí 16.8, 17.2, 17.5
/paper entity list ‚Üí 12,450 entities
Memory: 14.2GB / 16GB (89%)
```

**–ü—Ä–æ–±–ª–µ–º–∏ (Spark –ø—Ä–æ—Ñ–∞–π–ª):**
```
Entity Tick: 48.3%
‚îú‚îÄ minecraft:item: 18.7%
‚îú‚îÄ minecraft:cow: 12.3%
‚îî‚îÄ minecraft:zombie: 8.9%

Plugins:
‚îú‚îÄ CitizensAPI: 14.2% ‚Üê –ü–†–û–ë–õ–ï–ú–ê!
‚îú‚îÄ Dynmap: 8.7% ‚Üê –ü–†–û–ë–õ–ï–ú–ê!
‚îî‚îÄ LuckPerms: 2.1%

Chunk Tick: 22.1%
‚îú‚îÄ Chunk Load: 12.3%
‚îî‚îÄ Random Tick: 9.8%

Redstone: 5.4%
```

---

## üîß –ö–†–û–ö 1: Backup (–û–ë–û–í''–Ø–ó–ö–û–í–û!)

### –ü–µ—Ä–µ–¥ –±—É–¥—å-—è–∫–∏–º–∏ –∑–º—ñ–Ω–∞–º–∏:

```bash
# –ó—É–ø–∏–Ω–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
/stop

# Backup –≤—Å—å–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
cd /home/minecraft/
tar -czf backup_$(date +%Y%m%d_%H%M%S).tar.gz server/

# –ê–±–æ —Ç—ñ–ª—å–∫–∏ –Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–µ
cd server/
tar -czf configs_backup.tar.gz bukkit.yml spigot.yml paper-world.yml server.properties

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ backup —Å—Ç–≤–æ—Ä–∏–≤—Å—è
ls -lh *.tar.gz
```

**–ù–Ü–ö–û–õ–ò –Ω–µ –º—ñ–Ω—è–π—Ç–µ –∫–æ–Ω—Ñ—ñ–≥–∏ –±–µ–∑ backup!**

---

## üêÑ –ö–†–û–ö 2: Entity Optimization

### 2.1. –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä —ñ –∑–∞–π—Ç–∏
/paper entity list

–†–µ–∑—É–ª—å—Ç–∞—Ç:
world: 12,450 entities
‚îú‚îÄ minecraft:item: 4,234 ‚Üê –î–£–ñ–ï –ë–ê–ì–ê–¢–û!
‚îú‚îÄ minecraft:cow: 2,567 ‚Üê –§–ï–†–ú–ò!
‚îú‚îÄ minecraft:zombie: 1,892
‚îú‚îÄ minecraft:villager: 1,456
‚îú‚îÄ minecraft:pig: 789
‚îî‚îÄ —ñ–Ω—à—ñ: 1,512
```

### 2.2. Spigot.yml - Entity Activation Range

**–î–û (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º):**

```yaml
# spigot.yml
world-settings:
  default:
    entity-activation-range:
      animals: 32
      monsters: 32
      raiders: 48
      misc: 16
      water: 16
      villagers: 32
      flying-monsters: 32
    
    tick-inactive-villagers: true
    nerf-spawner-mobs: false
    
    item-despawn-rate: 6000
    merge-radius:
      item: 2.5
      exp: 3.0
```

**–ü–Ü–°–õ–Ø (–æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ):**

```yaml
# spigot.yml
world-settings:
  default:
    entity-activation-range:
      # –ó–º–µ–Ω—à–∏–ª–∏ –≤–¥–≤—ñ—á—ñ - entities –¥–∞–ª—ñ = –∑–∞–º–æ—Ä–æ–∂–µ–Ω—ñ
      animals: 16          # –ë—É–ª–æ: 32
      monsters: 24         # –ë—É–ª–æ: 32 (—Ç—Ä–æ—Ö–∏ –±—ñ–ª—å—à–µ –¥–ª—è PvE)
      raiders: 48          # –ó–∞–ª–∏—à–∏–ª–∏ (pillagers –≤–∞–∂–ª–∏–≤—ñ)
      misc: 8              # –ë—É–ª–æ: 16 (–ø—Ä–µ–¥–º–µ—Ç–∏, —Å—Ç—Ä—ñ–ª–∏)
      water: 8             # –ë—É–ª–æ: 16 (—Ä–∏–±–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ñ)
      villagers: 24        # –ë—É–ª–æ: 32 (–¥–ª—è —Ç–æ—Ä–≥—ñ–≤–ª—ñ)
      flying-monsters: 32  # –ó–∞–ª–∏—à–∏–ª–∏ (phantoms, ghasts)
    
    # –ù–ï —Ç—ñ–∫–∞—Ç–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏—Ö –≤—ñ–ª–ª–∞–≥–µ—Ä—ñ–≤ = –µ–∫–æ–Ω–æ–º—ñ—è
    tick-inactive-villagers: false  # –ë—É–ª–æ: true
    
    # –û—Å–ª–∞–±–∏—Ç–∏ –º–æ–±—ñ–≤ –∑—ñ —Å–ø–∞–≤–Ω–µ—Ä—ñ–≤ (–º–µ–Ω—à–µ HP/damage)
    nerf-spawner-mobs: true         # –ë—É–ª–æ: false
    
    # –ü—Ä–µ–¥–º–µ—Ç–∏ –∑–Ω–∏–∫–∞—é—Ç—å —à–≤–∏–¥—à–µ
    item-despawn-rate: 2400  # –ë—É–ª–æ: 6000 (2 —Ö–≤ –∑–∞–º—ñ—Å—Ç—å 5 —Ö–≤)
    
    # –û–±''—î–¥–Ω—É–≤–∞—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç–∏ –±–ª–∏–∂—á–µ
    merge-radius:
      item: 4.0   # –ë—É–ª–æ: 2.5
      exp: 6.0    # –ë—É–ª–æ: 3.0
    
    # –®–≤–∏–¥–∫–∏–π –¥–µ—Å–ø–∞–≤–Ω —Å–º—ñ—Ç—Ç—è
    alt-item-despawn-rate:
      enabled: true
      items:
        COBBLESTONE: 600      # 30 —Å–µ–∫—É–Ω–¥
        NETHERRACK: 600
        DIRT: 600
        SAND: 600
        GRAVEL: 600
        STONE: 900            # 45 —Å–µ–∫—É–Ω–¥
        DIORITE: 600
        ANDESITE: 600
        GRANITE: 600
```

**–©–æ —Ü–µ –¥–∞—î:**
- ‚ùå Entities –¥–∞–ª—ñ 16 –±–ª–æ–∫—ñ–≤ –≤—ñ–¥ –≥—Ä–∞–≤—Ü—ñ–≤ = AI –≤–∏–º–∫–Ω–µ–Ω–∏–π
- ‚ùå –ù–µ–∞–∫—Ç–∏–≤–Ω—ñ –≤—ñ–ª–ª–∞–≥–µ—Ä–∏ –Ω–µ —Ç—ñ–∫–∞—é—Ç—å = –µ–∫–æ–Ω–æ–º—ñ—è CPU
- ‚ùå –ü—Ä–µ–¥–º–µ—Ç–∏ –∑–Ω–∏–∫–∞—é—Ç—å –≤ 2.5 —Ä–∞–∑–∏ —à–≤–∏–¥—à–µ
- ‚ùå –°–º—ñ—Ç—Ç—è (cobblestone) –¥–µ—Å–ø–∞–≤–Ω–∏—Ç—å—Å—è –∑–∞ 30 —Å–µ–∫
- ‚úÖ **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Entity Tick 48% ‚Üí 25%**

**–ü–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏:**
- ‚ö†Ô∏è –§–µ—Ä–º–∏ –ø—Ä–∞—Ü—é—é—Ç—å —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –≥—Ä–∞–≤–µ—Ü—å –ø–æ—Ä—É—á (–Ω–æ—Ä–º–∞!)
- ‚ö†Ô∏è –ú–æ–±–∏ –Ω–µ –∞—Ç–∞–∫—É—é—Ç—å –∑–¥–∞–ª–µ–∫—É (feature –¥–ª—è PvE)
- ‚ö†Ô∏è –í—ñ–ª–ª–∞–≥–µ—Ä–∏ –Ω–µ —Ä–æ–∑–º–Ω–æ–∂—É—é—Ç—å—Å—è —Å–∞–º—ñ (OK)

### 2.3. Paper.yml - Spawn Limits

**–î–û:**

```yaml
# paper-world.yml (–∞–±–æ paper-world-defaults.yml –¥–ª—è Paper 1.19+)
entities:
  spawning:
    spawn-limits:
      monster: 70
      creature: 15
      ambient: 15
      axolotls: 5
      underground_water_creature: 5
      water_creature: 5
      water_ambient: 20
```

**–ü–Ü–°–õ–Ø:**

```yaml
# paper-world.yml
entities:
  spawning:
    # –ó–º–µ–Ω—à–∏–ª–∏ –ª—ñ–º—ñ—Ç–∏ —Å–ø–∞–≤–Ω—É
    spawn-limits:
      monster: 50         # –ë—É–ª–æ: 70 (-29%)
      creature: 10        # –ë—É–ª–æ: 15 (-33%)
      ambient: 10         # –ë—É–ª–æ: 15 (–∫–∞–∂–∞–Ω–∏)
      axolotls: 3         # –ë—É–ª–æ: 5
      underground_water_creature: 3
      water_creature: 3   # –ë—É–ª–æ: 5
      water_ambient: 15   # –ë—É–ª–æ: 20
    
    # –Ø–∫ —á–∞—Å—Ç–æ —Å–ø–∞–≤–Ω–∏—Ç–∏
    tick-rates:
      animal: 400         # –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
      monster: 5
      water: 11
      water-ambient: 21
      ambient: 31
    
    # –°–ø–∞–≤–Ω —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –≥—Ä–∞–≤—Ü—ñ —î
    all-chunks-are-slime-chunks: false
    alt-item-despawn-rate:
      enabled: true
    
    # –î–µ—Å–ø–∞–≤–Ω –≤—ñ–¥—Å—Ç–∞–Ω—ñ
    despawn-ranges:
      soft: 28    # –ü–æ—á–∏–Ω–∞—Ç–∏ –¥–µ—Å–ø–∞–≤–Ω (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 32)
      hard: 96    # –§–æ—Ä—Å—É–≤–∞—Ç–∏ –¥–µ—Å–ø–∞–≤–Ω (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 128)
  
  behavior:
    # –í—ñ–¥–∫–ª—é—á–∏—Ç–∏ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ñ—ñ—á—ñ
    disable-chest-cat-detection: true        # –ö–æ—Ç–∏ –Ω–µ —Å—ñ–¥–∞—é—Ç—å –Ω–∞ —Å–∫—Ä–∏–Ω—ñ
    disable-creeper-lingering-effect: true   # –ö—Ä–∏–ø–µ—Ä–∏ –±–µ–∑ lingering effect
    disable-player-crits: false              # –ó–∞–ª–∏—à–∏—Ç–∏ –∫—Ä–∏—Ç–∏ –¥–ª—è PvP
    door-breaking-difficulty:
      zombie: HARD                           # –ó–æ–º–±—ñ –ª–∞–º–∞—é—Ç—å –¥–≤–µ—Ä—ñ —Ç—ñ–ª—å–∫–∏ –Ω–∞ Hard
      vindicator: NORMAL
    ender-dragons-death-always-places-dragon-egg: false
    parrots-are-unaffected-by-player-movement: false
    phantoms-do-not-spawn-on-creative-players: true
    piglins-guard-chests: true
    pillager-patrols:
      disable: false
      spawn-chance: 0.2                      # –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
      spawn-delay:
        per-player: false
        ticks: 12000
      start:
        per-player: false
        day: 5
    should-remove-dragon: false
    spawner-nerfed-mobs-should-jump: false
    zombie-villager-infection-chance: -1.0
    zombies-target-turtle-eggs: true
```

**–©–æ —Ü–µ –¥–∞—î:**
- ‚úÖ –ù–∞ 29% –º–µ–Ω—à–µ –º–æ–Ω—Å—Ç—Ä—ñ–≤
- ‚úÖ –ù–∞ 33% –º–µ–Ω—à–µ —Ç–≤–∞—Ä–∏–Ω
- ‚úÖ –î–µ—Å–ø–∞–≤–Ω –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –±–ª–∏–∂—á–µ
- ‚úÖ **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: —â–µ -5% Entity Tick**

### 2.4. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ FarmLimiter

```bash
# –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø–ª–∞–≥—ñ–Ω
cd plugins/
wget https://github.com/Obydux/FarmLimiter/releases/download/v1.4.0/FarmLimiter-1.4.0.jar

# –ê–±–æ –∑ SpigotMC
# https://www.spigotmc.org/resources/farmlimiter.1419/
```

**config.yml –¥–ª—è FarmLimiter:**

```yaml
# plugins/FarmLimiter/config.yml

# –õ—ñ–º—ñ—Ç–∏ –Ω–∞ —á–∞–Ω–∫ (16x16 –±–ª–æ–∫—ñ–≤)
limits:
  # –ú–∏—Ä–Ω—ñ –º–æ–±–∏
  passive:
    cow: 10             # –ú–∞–∫—Å–∏–º—É–º 10 –∫–æ—Ä—ñ–≤ –Ω–∞ —á–∞–Ω–∫
    pig: 10
    sheep: 10
    chicken: 15         # –ö—É—Ä–µ–π –º–æ–∂–µ –±—É—Ç–∏ –±—ñ–ª—å—à–µ (—è–π—Ü—è)
    rabbit: 8
    horse: 6
    donkey: 4
    llama: 6
    cat: 8
    parrot: 10
    
  # –í–æ—Ä–æ–∂—ñ –º–æ–±–∏ (–¥–ª—è —Å–ø–∞–≤–Ω–µ—Ä—ñ–≤)
  hostile:
    zombie: 12
    skeleton: 12
    creeper: 8
    spider: 10
    witch: 6
    enderman: 8
    blaze: 10           # –î–ª—è —Ñ–µ—Ä–º blaze
    
  # –í—ñ–ª–ª–∞–≥–µ—Ä–∏
  villagers:
    villager: 15        # –î–ª—è —Ç–æ—Ä–≥–æ–≤–∏—Ö –∑–∞–ª—ñ–≤
    
  # –Ü–Ω—à–µ
  other:
    item_frame: 30      # –†–∞–º–∫–∏ –¥–ª—è –¥–µ–∫–æ—Ä—É
    armor_stand: 25     # –°—Ç–µ–Ω–¥–∏ –¥–ª—è –¥–µ–∫–æ—Ä—É
    minecart: 10
    boat: 8

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è
removal:
  enabled: true
  check-interval: 300          # –ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω
  kill-excess: true            # –í–±–∏–≤–∞—Ç–∏ –∑–∞–π–≤—ñ entities
  
  # –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  broadcast-removal: false     # –ù–µ —Å–ø–∞–º–∏—Ç–∏ —á–∞—Ç
  log-removal: true            # –õ–æ–≥—É–≤–∞—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å
  
  # –©–æ –Ω–µ —á—ñ–ø–∞—Ç–∏
  protect:
    named: true                # –ù–µ —á—ñ–ø–∞—Ç–∏ —ñ–º–µ–Ω–æ–≤–∞–Ω–∏—Ö
    leashed: true              # –ù–∞ –ø–æ–≤—ñ–¥–∫—É
    tamed: true                # –ü—Ä–∏—Ä—É—á–µ–Ω–∏—Ö
    has-saddle: true           # –ó —Å—ñ–¥–ª–æ–º

# –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –≥—Ä–∞–≤—Ü—è–º
warnings:
  enabled: true
  message: "&c[FarmLimiter] &7–ó–∞–Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ entities! –î–µ—è–∫—ñ –±—É–ª–∏ –≤–∏–¥–∞–ª–µ–Ω—ñ."
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä:**

```bash
/stop
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∑–Ω–æ–≤—É

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ –ø–ª–∞–≥—ñ–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–≤—Å—è
/plugins
# –ú–∞—î –±—É—Ç–∏ –∑–µ–ª–µ–Ω–∏–π: [FarmLimiter]

# –ß–µ—Ä–µ–∑ 10 —Ö–≤–∏–ª–∏–Ω –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
/paper entity list
```

### 2.5. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—ñ—Å–ª—è Entity –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

**–î–û:**
```
world: 12,450 entities
Entity Tick: 48.3%
TPS: 16.8
```

**–ü–Ü–°–õ–Ø:**
```
world: 3,200 entities ‚úÖ (-74%!)
Entity Tick: 22.1% ‚úÖ (-54%!)
TPS: 18.3 ‚úÖ (+1.5 TPS)
```

---

## üó∫Ô∏è –ö–†–û–ö 3: Chunk Optimization

### 3.1. Server.properties

**–î–û:**

```properties
# server.properties
view-distance=10
simulation-distance=10
```

**–ü–Ü–°–õ–Ø:**

```properties
# server.properties
view-distance=6              # –ë—É–ª–æ: 10 (6 chunks = 96 –±–ª–æ–∫—ñ–≤)
simulation-distance=4        # –ë—É–ª–æ: 10 (entities/redstone –∞–∫—Ç–∏–≤–Ω—ñ)

# –Ü–Ω—à—ñ –≤–∞–∂–ª–∏–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
max-tick-time=60000          # Crash –ø—Ä–∏ 60 sec freeze
network-compression-threshold=256
entity-broadcast-range-percentage=100
```

**–©–æ —Ü–µ –¥–∞—î:**
- ‚úÖ –ú–µ–Ω—à–µ —á–∞–Ω–∫—ñ–≤ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ
- ‚úÖ –ú–µ–Ω—à–µ entities –∞–∫—Ç–∏–≤–Ω—ñ
- ‚úÖ **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: -3-5% Chunk Tick, +1-2 TPS**

**–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è:**

```
View Distance 10:           View Distance 6:
[][][][][]                  [][][]
[][P][]                       [P]
[][][][][]                  [][][]
160 –±–ª–æ–∫—ñ–≤                  96 –±–ª–æ–∫—ñ–≤
```

### 3.2. Paper.yml - Chunk Settings

**–î–û:**

```yaml
# paper-world.yml
chunks:
  auto-save-interval: default
  delay-chunk-unloads-by: 10s
  entity-per-chunk-save-limit:
    experience_orb: -1
    snowball: -1
    ender_pearl: -1
    arrow: -1
  fixed-chunk-inhabited-time: -1
  max-auto-save-chunks-per-tick: 24
  prevent-moving-into-unloaded-chunks: false
```

**–ü–Ü–°–õ–Ø:**

```yaml
# paper-world.yml
chunks:
  # –Ø–∫ —á–∞—Å—Ç–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —á–∞–Ω–∫–∏
  auto-save-interval: default  # 6000 —Ç—ñ–∫—ñ–≤ = 5 —Ö–≤–∏–ª–∏–Ω
  
  # –ù–µ –≤–∏–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —á–∞–Ω–∫–∏ –≤—ñ–¥—Ä–∞–∑—É (–µ–∫–æ–Ω–æ–º–∏—Ç—å –Ω–∞ load/unload)
  delay-chunk-unloads-by: 15s  # –ë—É–ª–æ: 10s
  
  # –õ—ñ–º—ñ—Ç entities –ø—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ —á–∞–Ω–∫—É
  entity-per-chunk-save-limit:
    experience_orb: 50   # –ë—É–ª–æ: -1 (unlimited)
    snowball: 20         # –ë—É–ª–æ: -1
    ender_pearl: 10      # –ë—É–ª–æ: -1
    arrow: 50            # –ë—É–ª–æ: -1
    dragon_fireball: 3
    egg: 20
    fireball: 5
    small_fireball: 5
    trident: 10
  
  # –ù–µ —Å–∏–º—É–ª—é–≤–∞—Ç–∏ —Å—Ç–∞—Ä—ñ —á–∞–Ω–∫–∏ —è–∫ –Ω–æ–≤—ñ
  fixed-chunk-inhabited-time: -1
  
  # –°–∫—ñ–ª—å–∫–∏ —á–∞–Ω–∫—ñ–≤ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∑–∞ —Ç—ñ–∫
  max-auto-save-chunks-per-tick: 12  # –ë—É–ª–æ: 24 (–º–µ–Ω—à–µ lag spike)
  
  # –ù–µ –ø—É—Å–∫–∞—Ç–∏ –≥—Ä–∞–≤—Ü—ñ–≤ —É –Ω–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ —á–∞–Ω–∫–∏
  prevent-moving-into-unloaded-chunks: true  # –ë—É–ª–æ: false
```

**–©–æ —Ü–µ –¥–∞—î:**
- ‚úÖ –ú–µ–Ω—à–µ entity spam (arrows, snowballs)
- ‚úÖ –ü–ª–∞–≤–Ω—ñ—à–µ –∞–≤—Ç–æ–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
- ‚úÖ –ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è chunk loading –µ–∫—Å–ø–ª–æ–π—Ç—ñ–≤

### 3.3. Pre-Generate World (–î–£–ñ–ï –í–ê–ñ–õ–ò–í–û!)

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Chunky
cd plugins/
wget https://ci.codemc.io/job/pop4959/job/Chunky/lastSuccessfulBuild/artifact/bukkit/target/Chunky-Bukkit.jar

# –ê–±–æ –∑ SpigotMC
# https://www.spigotmc.org/resources/chunky.81534/
```

**–ó–∞–ø—É—Å—Ç–∏—Ç–∏ pre-generation:**

```bash
/chunky world world
/chunky radius 5000            # 5000 –±–ª–æ–∫—ñ–≤ –≤—ñ–¥ —Å–ø–∞–≤–Ω—É
/chunky pattern square         # –ö–≤–∞–¥—Ä–∞—Ç–Ω–∏–π –ø–∞—Ç–µ—Ä–Ω
/chunky start

# –î–ª—è Nether —Ç–∞ End
/chunky world world_nether
/chunky radius 2000            # Nether –º–µ–Ω—à–∏–π
/chunky start

/chunky world world_the_end
/chunky radius 3000
/chunky start
```

**–ü—Ä–æ–≥—Ä–µ—Å:**

```
[Chunky] Task running for world. Processed: 12500 chunks (45.3%), ETA: 2h 15m
```

**–ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è:**

```bash
# –û–±—Ä—ñ–∑–∞—Ç–∏ —Å–≤—ñ—Ç –ø–æ –º–µ–∂—ñ pre-gen
/chunky worldborder world
/chunky shape square
/chunky center 0 0
/chunky radius 5000
/chunky confirm

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ world border –≤ –≥—Ä—ñ
/worldborder center 0 0
/worldborder set 10000        # 5000 –±–ª–æ–∫—ñ–≤ = 10000 –¥—ñ–∞–º–µ—Ç—Ä
```

**–©–æ —Ü–µ –¥–∞—î:**
- ‚úÖ –ù–£–õ–¨ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —á–∞–Ω–∫—ñ–≤ –ø—ñ–¥ —á–∞—Å –≥—Ä–∏
- ‚úÖ –°—Ç–∞–±—ñ–ª—å–Ω–∏–π TPS –ø—Ä–∏ exploration
- ‚úÖ **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: -10% Chunk Tick, +2-3 TPS**

### 3.4. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—ñ—Å–ª—è Chunk –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

**–î–û (–ø—ñ—Å–ª—è Entity —Ñ—ñ–∫—Å–∞):**
```
Chunk Tick: 22.1%
TPS: 18.3
```

**–ü–Ü–°–õ–Ø:**
```
Chunk Tick: 10.8% ‚úÖ (-51%!)
TPS: 19.2 ‚úÖ (+0.9 TPS)
```

---

## üîå –ö–†–û–ö 4: Plugin Optimization

### 4.1. –ê–Ω–∞–ª—ñ–∑ –ø—Ä–æ–±–ª–µ–º–Ω–∏—Ö –ø–ª–∞–≥—ñ–Ω—ñ–≤

```
Spark –ø–æ–∫–∞–∑—É—î:
‚îú‚îÄ CitizensAPI: 14.2% ‚Üê –ö–†–ò–¢–ò–ß–ù–û!
‚îú‚îÄ Dynmap: 8.7% ‚Üê –ü–†–û–ë–õ–ï–ú–ê!
‚îî‚îÄ LuckPerms: 2.1% ‚Üê OK
```

### 4.2. Citizens - –û–±–º–µ–∂–∏—Ç–∏ NPC

**config.yml –¥–ª—è Citizens:**

```yaml
# plugins/Citizens/config.yml

general:
  # –õ—ñ–º—ñ—Ç NPC
  max-npc-limit: 50            # –ë—É–ª–æ: -1 (unlimited)
  
  # –í—ñ–¥—Å—Ç–∞–Ω—å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
  default-look-close-range: 5  # –ë—É–ª–æ: 10 (NPC –¥–∏–≤–ª—è—Ç—å—Å—è –Ω–∞ –≥—Ä–∞–≤—Ü—ñ–≤)
  default-pathfinding-range: 25  # –ë—É–ª–æ: 50
  
  # –Ø–∫ —á–∞—Å—Ç–æ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ NPC
  tick-npc-packets: 5          # –ë—É–ª–æ: 1 (–∫–æ–∂–Ω—ñ 5 —Ç—ñ–∫—ñ–≤)
  
  # –í—ñ–¥–∫–ª—é—á–∏—Ç–∏ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–µ
  default-talk-close-to-npc-only: true
  npc-cost: 0
  
storage:
  # MySQL –∑–∞–º—ñ—Å—Ç—å —Ñ–∞–π–ª—ñ–≤
  type: mysql                  # –ë—É–ª–æ: yaml
  mysql:
    host: localhost
    port: 3306
    database: citizens_db
    username: minecraft
    password: your_password
    
npc:
  # –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è
  pathfinding:
    update-path-rate: 20       # –ë—É–ª–æ: 10 (—Ä—ñ–¥—à–µ —à—É–∫–∞—Ç–∏ —à–ª—è—Ö)
  
  # –î–µ—Å–ø–∞–≤–Ω NPC –¥–∞–ª–µ–∫–æ –≤—ñ–¥ –≥—Ä–∞–≤—Ü—ñ–≤
  always-use-name-holograms: false
  chat:
    max-distance: 10           # –ë—É–ª–æ: 25
  
  controllable:
    enabled: false             # –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ
```

**–ê–ë–û –∫—Ä–∞—â–µ - –∑–∞–º—ñ–Ω–∏—Ç–∏ Citizens –Ω–∞ –ª–µ–≥—à—É –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É:**

```bash
# –í–∏–¥–∞–ª–∏—Ç–∏ Citizens
rm plugins/Citizens.jar
rm -rf plugins/Citizens/

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ FancyNpcs (–ª–µ–≥—à–∏–π)
wget https://github.com/FancyMcPlugins/FancyNpcs/releases/download/v2.0.7/FancyNpcs-2.0.7.jar
```

### 4.3. Dynmap - –ó–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞ BlueMap

**–ß–æ–º—É Dynmap –ª–∞–≥–∞—î:**
- –†–µ–Ω–¥–µ—Ä–∏—Ç—å —á–∞–Ω–∫–∏ –≤ Main Thread
- –ì–µ–Ω–µ—Ä—É—î tiles —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- –ë–∞–≥–∞—Ç–æ I/O –æ–ø–µ—Ä–∞—Ü—ñ–π

**–í–∏–¥–∞–ª–∏—Ç–∏ Dynmap:**

```bash
/stop
rm plugins/Dynmap.jar
rm -rf plugins/dynmap/
```

**–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ BlueMap (–≤ 5 —Ä–∞–∑—ñ–≤ —à–≤–∏–¥—à–∏–π):**

```bash
cd plugins/
wget https://github.com/BlueMap-Minecraft/BlueMap/releases/download/v3.20/BlueMap-3.20-paper.jar

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä - –∑–≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –∫–æ–Ω—Ñ—ñ–≥
# –í–∏–º–∫–Ω—É—Ç–∏ —Å–µ—Ä–≤–µ—Ä —ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏
```

**core.conf –¥–ª—è BlueMap:**

```hocon
# plugins/BlueMap/core.conf

# –í–µ–±-—Å–µ—Ä–≤–µ—Ä
webserver {
  enabled: true
  port: 8100
  
  # –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ nginx (–∫—Ä–∞—â–µ)
  # enabled: false
}

# –†–µ–Ω–¥–µ—Ä –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
render-thread-count: 2        # –ë—É–ª–æ: 4 (–º–µ–Ω—à–µ = –º–µ–Ω—à–µ lag)

# –Ø–∫ —á–∞—Å—Ç–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏
map-update-interval: 300      # 5 —Ö–≤–∏–ª–∏–Ω (–±—É–ª–æ 60 —Å–µ–∫—É–Ω–¥)

# –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ –¥–∞–Ω—ñ –Ω–∞ –¥–∏—Å–∫—É, –Ω–µ –≤ –ø–∞–º—è—Ç—ñ
store-compressed: true
```

**–©–æ —Ü–µ –¥–∞—î:**
- ‚úÖ Dynmap 8.7% ‚Üí BlueMap 1.2%
- ‚úÖ Async —Ä–µ–Ω–¥–µ—Ä = –Ω—É–ª—å –ª–∞–≥—ñ–≤
- ‚úÖ **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: -7.5%, +0.5 TPS**

### 4.4. LuckPerms - –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

```yaml
# plugins/LuckPerms/config.yml

storage:
  # MySQL –∑–∞–º—ñ—Å—Ç—å H2
  storage-method: MySQL
  
  data:
    pool-settings:
      maximum-pool-size: 10    # –ë—É–ª–æ: 30
      minimum-idle: 5          # –ë—É–ª–æ: 10
      maximum-lifetime: 1800000
      connection-timeout: 5000
    
    # –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è
    sync-minutes: 3            # –ë—É–ª–æ: 1 (—Ä—ñ–¥—à–µ)
    
  # –ö–µ—à—É–≤–∞–Ω–Ω—è
  split-storage:
    enabled: true
    methods:
      user: mysql
      group: h2                # –ì—Ä—É–ø–∏ –≤ –ª–æ–∫–∞–ª—å–Ω—ñ–π –ë–î (—à–≤–∏–¥—à–µ)
      track: h2
      uuid: h2
      log: mysql

# –ú–µ—Ä–µ–∂–µ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
messaging-service: none        # –ê–±–æ redis –¥–ª—è bungee

# –í—ñ–¥–∫–ª—é—á–∏—Ç–∏ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–µ
debug-logins: false
enable-ops: false
auto-op: false
commands-allow-op: false

# –û–Ω–æ–≤–ª–µ–Ω–Ω—è
update-client-when-online: true
```

### 4.5. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—ñ—Å–ª—è Plugin –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

**–î–û:**
```
CitizensAPI: 14.2%
Dynmap: 8.7%
LuckPerms: 2.1%
TPS: 19.2
```

**–ü–Ü–°–õ–Ø:**
```
FancyNpcs: 2.3% ‚úÖ (–±—É–ª–æ Citizens 14.2%)
BlueMap: 1.2% ‚úÖ (–±—É–ª–æ Dynmap 8.7%)
LuckPerms: 1.8% ‚úÖ (–±—É–ª–æ 2.1%)
TPS: 19.7 ‚úÖ (+0.5 TPS)
```

---

## üìä –§–Ü–ù–ê–õ–¨–ù–Ü –†–ï–ó–£–õ–¨–¢–ê–¢–ò

### –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –î–û/–ü–Ü–°–õ–Ø

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë –ú–µ—Ç—Ä–∏–∫–∞               ‚ïë –î–û        ‚ïë –ü–Ü–°–õ–Ø      ‚ïë –ó–º—ñ–Ω–∞     ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë TPS (—Å–µ—Ä–µ–¥–Ω—ñ–π)        ‚ïë 16.8      ‚ïë 19.7      ‚ïë +2.9 ‚úÖ   ‚ïë
‚ïë Entity Tick           ‚ïë 48.3%     ‚ïë 22.1%     ‚ïë -54% ‚úÖ   ‚ïë
‚ïë Chunk Tick            ‚ïë 22.1%     ‚ïë 10.8%     ‚ïë -51% ‚úÖ   ‚ïë
‚ïë Plugin Overhead       ‚ïë 25.1%     ‚ïë 5.3%      ‚ïë -79% ‚úÖ   ‚ïë
‚ïë Redstone              ‚ïë 5.4%      ‚ïë 4.2%      ‚ïë -22% ‚úÖ   ‚ïë
‚ïë Entities (total)      ‚ïë 12,450    ‚ïë 3,200     ‚ïë -74% ‚úÖ   ‚ïë
‚ïë Memory Usage          ‚ïë 14.2GB    ‚ïë 11.8GB    ‚ïë -17% ‚úÖ   ‚ïë
‚ïë –ì—Ä–∞–≤—Ü—ñ–≤ –ø—ñ–¥—Ç—Ä–∏–º—É—î     ‚ïë 45 max    ‚ïë 70+ ‚úÖ    ‚ïë +56% ‚úÖ   ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

### –ß–∞—Å–æ–≤—ñ —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ—ó

```
–ö—Ä–æ–∫ 1 (Backup):          5 —Ö–≤
–ö—Ä–æ–∫ 2 (Entity):          20 —Ö–≤
–ö—Ä–æ–∫ 3 (Chunks):          3 –≥–æ–¥ (pre-gen) + 15 —Ö–≤ (–∫–æ–Ω—Ñ—ñ–≥)
–ö—Ä–æ–∫ 4 (Plugins):         30 —Ö–≤
–ö—Ä–æ–∫ 5 (–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è):      1 –≥–æ–¥

–ó–∞–≥–∞–ª–æ–º: ~5 –≥–æ–¥–∏–Ω (–ø–µ—Ä–µ–≤–∞–∂–Ω–æ —á–µ–∫–∞—Ç–∏ pre-gen)
```

---

## üéØ –ß–µ–∫-–ª–∏—Å—Ç: –©–æ —Ä–æ–±–∏—Ç–∏ –ø—ñ—Å–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

### –ü–µ—Ä—à—ñ 24 –≥–æ–¥–∏–Ω–∏:

```bash
# –ì–æ–¥–∏–Ω–∞ 0: –ó–∞–ø—É—Å–∫
- –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î
- /plugins - –≤—Å—ñ –∑–µ–ª–µ–Ω—ñ?

# –ì–æ–¥–∏–Ω–∞ 1: –ü–µ—Ä—à–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
/spark tps
/spark healthreport
# –ó–±–µ—Ä–µ–≥—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

# –ì–æ–¥–∏–Ω–∞ 3: –ü—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º
# –î–æ—á–µ–∫–∞—Ç–∏—Å—å –ø—ñ–∫—É –≥—Ä–∞–≤—Ü—ñ–≤
/spark profiler --timeout 600  # 10 —Ö–≤–∏–ª–∏–Ω
# –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —á–∏ —î –Ω–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏

# –ì–æ–¥–∏–Ω–∞ 6: Mid-check
/paper entity list
# –ß–∏ FarmLimiter –ø—Ä–∞—Ü—é—î?

# –ì–æ–¥–∏–Ω–∞ 12: –ù—ñ—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
# TPS –≤–Ω–æ—á—ñ –º–∞—î –±—É—Ç–∏ 19.9+

# –ì–æ–¥–∏–Ω–∞ 24: –§—ñ–Ω–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç
/spark profiler --timeout 600
# –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ –∑ –ø–æ—á–∞—Ç–∫–æ–≤–∏–º
```

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ (—â–æ—Ç–∏–∂–Ω—è):

```bash
# –ü–æ–Ω–µ–¥—ñ–ª–æ–∫ —Ä–∞–Ω–æ–∫
1. /spark healthreport
2. /paper entity list
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ –Ω–∞ –ø–æ–º–∏–ª–∫–∏
4. Backup –∫–æ–Ω—Ñ—ñ–≥—ñ–≤

# –ß–µ—Ç–≤–µ—Ä (–ø—ñ–∫)
1. /spark profiler –ø—ñ–¥ –ø–æ–≤–Ω–∏–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º
2. –®—É–∫–∞—Ç–∏ –Ω–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏
3. –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ –∑ –º–∏–Ω—É–ª–∏–º —Ç–∏–∂–Ω–µ–º
```

---

## üö´ –¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏ (–Ø–ö –ù–ï –†–û–ë–ò–¢–ò)

### ‚ùå –ü–û–ú–ò–õ–ö–ê 1: –ó–∞–Ω–∞–¥—Ç–æ –∞–≥—Ä–µ—Å–∏–≤–Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

**–ü–æ–≥–∞–Ω–æ:**

```yaml
# spigot.yml
entity-activation-range:
  animals: 4        # –î–£–ñ–ï –ú–ê–õ–û!
  monsters: 8       # –î–£–ñ–ï –ú–ê–õ–û!
  villagers: 8      # –¢–æ—Ä–≥—ñ–≤–ª—è –Ω–µ –ø—Ä–∞—Ü—é—î!
```

**–ß–æ–º—É –ø–æ–≥–∞–Ω–æ:**
- –§–µ—Ä–º–∏ –≤–∑–∞–≥–∞–ª—ñ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å
- –ú–æ–±–∏ –Ω–µ –∞—Ç–∞–∫—É—é—Ç—å
- –ì—Ä–∞–≤—Ü—ñ —Å–∫–∞—Ä–∂–∞—Ç—å—Å—è

**–î–æ–±—Ä–µ:**

```yaml
entity-activation-range:
  animals: 16       # –î–æ—Å—Ç–∞—Ç–Ω—å–æ
  monsters: 24      # PvE –Ω–æ—Ä–º –ø—Ä–∞—Ü—é—î
  villagers: 24     # –¢–æ—Ä–≥—ñ–≤–ª—è –ø—Ä–∞—Ü—é—î
```

### ‚ùå –ü–û–ú–ò–õ–ö–ê 2: –ó–º—ñ–Ω—é–≤–∞—Ç–∏ –≤—Å–µ —Ä–∞–∑–æ–º

**–ü–æ–≥–∞–Ω–æ:**

```
1. –ó–º—ñ–Ω–∏—Ç–∏ spigot.yml
2. –ó–º—ñ–Ω–∏—Ç–∏ paper.yml
3. –ó–º—ñ–Ω–∏—Ç–∏ server.properties
4. –î–æ–¥–∞—Ç–∏ 5 –ø–ª–∞–≥—ñ–Ω—ñ–≤
5. –í–∏–¥–∞–ª–∏—Ç–∏ 10 –ø–ª–∞–≥—ñ–Ω—ñ–≤
‚Üí –©–æ—Å—å –∑–ª–∞–º–∞–ª–æ—Å—å, –Ω–µ –∑–Ω–∞—é —â–æ!
```

**–î–æ–±—Ä–µ:**

```
1. –ó–º—ñ–Ω–∏—Ç–∏ spigot.yml ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ ‚Üí —Ç–µ—Å—Ç ‚Üí Spark
2. –ó–º—ñ–Ω–∏—Ç–∏ paper.yml ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ ‚Üí —Ç–µ—Å—Ç ‚Üí Spark
3. ...
‚Üí –ó–Ω–∞—é —â–æ —Å–∞–º–µ —Å–ø—Ä–∞—Ü—é–≤–∞–ª–æ –∞–±–æ –∑–ª–∞–º–∞–ª–æ—Å—å
```

### ‚ùå –ü–û–ú–ò–õ–ö–ê 3: –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –±–µ–∑ –ø—Ä–æ—Ñ–∞–π–ª—É

**–ü–æ–≥–∞–Ω–æ:**

```
"–ß—É–≤ —â–æ view-distance=3 –Ω–∞–π–∫—Ä–∞—â–µ"
‚Üí –°—Ç–∞–≤–ª—é 3
‚Üí –ì—Ä–∞–≤—Ü—ñ —Å–∫–∞—Ä–∂–∞—Ç—å—Å—è —â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –≤–∏–¥–Ω–æ
‚Üí "–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –Ω–µ –ø—Ä–∞—Ü—é—î"
```

**–î–æ–±—Ä–µ:**

```
1. /spark profiler
2. –ü–æ–±–∞—á–∏–≤: Chunk Tick 28% (–ø—Ä–æ–±–ª–µ–º–∞!)
3. view-distance 10 ‚Üí 6
4. /spark profiler –∑–Ω–æ–≤—É
5. Chunk Tick 11% ‚úÖ
‚Üí –ü—Ä–∞—Ü—é—î, TPS +2
```

### ‚ùå –ü–û–ú–ò–õ–ö–ê 4: –ù–µ —Ä–æ–±–∏—Ç–∏ backup

**–ü–æ–≥–∞–Ω–æ:**

```
–ó–º—ñ–Ω–∏–≤ –∫–æ–Ω—Ñ—ñ–≥–∏ ‚Üí —â–æ—Å—å –∑–ª–∞–º–∞–ª–æ—Å—å ‚Üí –Ω–µ –ø–∞–º—è—Ç–∞—é —â–æ –±—É–ª–æ
‚Üí –ü–µ—Ä–µ—ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—è —Å–µ—Ä–≤–µ—Ä–∞
```

**–î–æ–±—Ä–µ:**

```
tar -czf backup.tar.gz config/
‚Üí –ó–º—ñ–Ω–∏–≤ ‚Üí —â–æ—Å—å –Ω–µ —Ç–∞–∫ ‚Üí tar -xzf backup.tar.gz
‚Üí –í—Å–µ –ø–æ–≤–µ—Ä–Ω—É–ª–æ—Å—å
```

### ‚ùå –ü–û–ú–ò–õ–ö–ê 5: –í–∏–¥–∞–ª—è—Ç–∏ –ø–ª–∞–≥—ñ–Ω–∏ –ø—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º

**–ü–æ–≥–∞–Ω–æ:**

```
60 –≥—Ä–∞–≤—Ü—ñ–≤ –æ–Ω–ª–∞–π–Ω
/stop
rm plugins/Citizens.jar
–ó–∞–ø—É—Å–∫
‚Üí Crash / corruption / –≥—Ä–∞–≤—Ü—ñ —Å–∫–∞—Ä–∂–∞—Ç—å—Å—è
```

**–î–æ–±—Ä–µ:**

```
–û–≥–æ–ª–æ—Å–∏—Ç–∏: "–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –æ 3:00 AM"
3:00 AM (5 –≥—Ä–∞–≤—Ü—ñ–≤ –æ–Ω–ª–∞–π–Ω)
/stop
rm plugins/Citizens.jar
–ó–∞–ø—É—Å–∫
‚Üí –í—Å–µ –û–ö
```

---

## üí° –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ—Ä–∞–¥–∏

### –ü–æ—Ä–∞–¥–∞ 1: –ü–æ—Å—Ç—É–ø–æ–≤–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

```
–¢–∏–∂–¥–µ–Ω—å 1: Entity optimization
‚Üí –¢–µ—Å—Ç –ø—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º
‚Üí –ó—ñ–±—Ä–∞—Ç–∏ feedback –≤—ñ–¥ –≥—Ä–∞–≤—Ü—ñ–≤

–¢–∏–∂–¥–µ–Ω—å 2: Chunk optimization
‚Üí Pre-gen —Å–≤—ñ—Ç—É (–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –≤–Ω–æ—á—ñ)
‚Üí –¢–µ—Å—Ç

–¢–∏–∂–¥–µ–Ω—å 3: Plugin optimization
‚Üí –ü–æ –æ–¥–Ω–æ–º—É –ø–ª–∞–≥—ñ–Ω—É

–¢–∏–∂–¥–µ–Ω—å 4: –§—ñ–Ω–∞–ª—å–Ω–∏–π —Ç—É–Ω–Ω—ñ–Ω–≥
```

### –ü–æ—Ä–∞–¥–∞ 2: –°–ª—É—Ö–∞–π—Ç–µ –≥—Ä–∞–≤—Ü—ñ–≤, –∞–ª–µ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ

```
–ì—Ä–∞–≤–µ—Ü—å: "–°–µ—Ä–≤–µ—Ä –ª–∞–≥–∞—î!"

–í–∏:
1. /spark tps ‚Üí 19.8 TPS (–Ω–æ—Ä–º–∞)
2. –ó–∞–ø–∏—Ç–∞—Ç–∏: "–©–æ —Å–∞–º–µ –ª–∞–≥–∞—î?"
3. "–ú–µ–Ω—ñ 300 –ø—ñ–Ω–≥"
‚Üí –ü—Ä–æ–±–ª–µ–º–∞ —É —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—ñ –≥—Ä–∞–≤—Ü—è, –Ω–µ —Å–µ—Ä–≤–µ—Ä

VS

1. /spark tps ‚Üí 15.2 TPS
2. "–¢–∞–∫, —î –ø—Ä–æ–±–ª–µ–º–∞"
3. /spark profiler
4. –§—ñ–∫—Å–∏—Ç–∏
```

### –ü–æ—Ä–∞–¥–∞ 3: –î–æ–∫—É–º–µ–Ω—Ç—É–π—Ç–µ –∑–º—ñ–Ω–∏

```
# optimization_log.txt

2024-12-02 14:30
- –ó–º—ñ–Ω–∏–≤ spigot.yml: entity-activation-range
- TPS –î–û: 16.8
- TPS –ü–Ü–°–õ–Ø: 18.1 (+1.3)
- Spark: https://spark.lucko.me/abcd1234
- –ì—Ä–∞–≤—Ü—ñ —Å–∫–∞—Ä–∂–∞—Ç—å—Å—è: –ù–Ü

2024-12-02 16:00
- –í—Å—Ç–∞–Ω–æ–≤–∏–≤ FarmLimiter
- TPS –î–û: 18.1
- TPS –ü–Ü–°–õ–Ø: 18.4 (+0.3)
- Entities: 12k ‚Üí 3.2k
```

### –ü–æ—Ä–∞–¥–∞ 4: –¢–µ—Å—Ç—É–π—Ç–µ –ø—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º

```
–ü–æ–≥–∞–Ω–æ: –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –æ 4 —Ä–∞–Ω–∫—É –∑ 2 –≥—Ä–∞–≤—Ü—è–º–∏
‚Üí TPS 20.0
‚Üí "–í—Å–µ —Å—É–ø–µ—Ä!"
‚Üí –û 8 –≤–µ—á–æ—Ä–∞ 60 –≥—Ä–∞–≤—Ü—ñ–≤ ‚Üí TPS 14.2
‚Üí "–©–æ —Å—Ç–∞–ª–æ—Å—å?!"

–î–æ–±—Ä–µ: –¢–µ—Å—Ç—É–≤–∞—Ç–∏ —É –ø—ñ–∫ (18:00-22:00)
‚Üí 60 –≥—Ä–∞–≤—Ü—ñ–≤
‚Üí /spark profiler
‚Üí –ë–∞—á–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏
```

### –ü–æ—Ä–∞–¥–∞ 5: –ù–µ –≥–æ–Ω–∏—Ç–∏—Å—è –∑–∞ 20.0 TPS

```
19.5-19.8 TPS = –í–Ü–î–ú–Ü–ù–ù–û ‚úÖ
19.0-19.5 TPS = –î–æ–±—Ä–µ ‚úÖ
18.5-19.0 TPS = –ü—Ä–∏–π–Ω—è—Ç–Ω–æ ‚ö†Ô∏è
<18.5 TPS = –ü–æ—Ç—Ä—ñ–±–Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è ‚ùå

20.0 TPS = —ñ–¥–µ–∞–ª—å–Ω–æ, –∞–ª–µ 19.7 —Ç–µ–∂ —á—É–¥–æ–≤–æ!
```

---

## üìö –§—ñ–Ω–∞–ª—å–Ω–∏–π —á–µ–∫-–ª–∏—Å—Ç

```
‚úÖ Backup –∫–æ–Ω—Ñ—ñ–≥—ñ–≤ –∑—Ä–æ–±–ª–µ–Ω–æ
‚úÖ spigot.yml –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ
‚úÖ paper.yml –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ
‚úÖ server.properties –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ
‚úÖ FarmLimiter –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
‚úÖ Pre-generation –≤–∏–∫–æ–Ω–∞–Ω–æ
‚úÖ –ü—Ä–æ–±–ª–µ–º–Ω—ñ –ø–ª–∞–≥—ñ–Ω–∏ –∑–∞–º—ñ–Ω–µ–Ω–æ
‚úÖ Spark –ø—Ä–æ—Ñ–∞–π–ª –î–û –∑–±–µ—Ä–µ–∂–µ–Ω–æ
‚úÖ Spark –ø—Ä–æ—Ñ–∞–π–ª –ü–Ü–°–õ–Ø –∑–±–µ—Ä–µ–∂–µ–Ω–æ
‚úÖ TPS –ø–æ–∫—Ä–∞—â–∏–≤—Å—è –º—ñ–Ω—ñ–º—É–º –Ω–∞ +2
‚úÖ Entities –∑–º–µ–Ω—à–∏–ª–∏—Å—å –º—ñ–Ω—ñ–º—É–º –Ω–∞ 50%
‚úÖ –ì—Ä–∞–≤—Ü—ñ –ù–ï —Å–∫–∞—Ä–∂–∞—Ç—å—Å—è –Ω–∞ –≥–µ–π–º–ø–ª–µ–π
‚úÖ –°–µ—Ä–≤–µ—Ä —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π 24+ –≥–æ–¥–∏–Ω–∏
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∑–º—ñ–Ω –≤–µ–¥–µ—Ç—å—Å—è
‚úÖ –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ
```

---

## üéì –î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è

1. **–ó—Ä–æ–±–∏—Ç–∏ backup** –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
2. **–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –í–°–Ü –∫–æ–Ω—Ñ—ñ–≥–∏** –∑ —Ü—å–æ–≥–æ —É—Ä–æ–∫—É (copy-paste)
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ pre-generation** –≤–∞—à–æ–≥–æ —Å–≤—ñ—Ç—É
4. **–ó—Ä–æ–±–∏—Ç–∏ 2 Spark –ø—Ä–æ—Ñ–∞–π–ª—ñ:** –¥–æ —Ç–∞ –ø—ñ—Å–ª—è
5. **–ó–∞–¥–æ–∫—É–º–µ–Ω—Ç—É–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏:**
   - TPS –¥–æ/–ø—ñ—Å–ª—è
   - Entities –¥–æ/–ø—ñ—Å–ª—è
   - –¢–æ–ø-3 –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è
   - –¢–æ–ø-3 –ø—Ä–æ–±–ª–µ–º–∏ —â–æ –∑–∞–ª–∏—à–∏–ª–∏—Å—å

6. **–ë–æ–Ω—É—Å:** –ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —É Discord –∫—É—Ä—Å—É

---

## üöÄ –©–æ –¥–∞–ª—ñ?

–£ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –º–æ–¥—É–ª—ñ –º–∏ —Ä–æ–∑–±–µ—Ä–µ–º–æ:
- **Aikar''s Flags** - JVM –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è (–∫—Ä–∏—Ç–∏—á–Ω–æ!)
- **Garbage Collection** —Ç—É–Ω–Ω—ñ–Ω–≥
- **Memory leak** –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- **Startup scripts** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó

**–ü—ñ–¥–≥–æ—Ç—É–π—Ç–µ—Å—å:** –Ω–∞—Å—Ç—É–ø–Ω–∏–π –º–æ–¥—É–ª—å = –Ω–∞–π–ø–æ—Ç—É–∂–Ω—ñ—à–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è!

---

**–í—ñ—Ç–∞—é! –í–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –ú–æ–¥—É–ª—å 1! üéâ**

–í–∞—à —Å–µ—Ä–≤–µ—Ä —Ç–µ–ø–µ—Ä –ø—Ä–∞—Ü—é—î –Ω–∞ 17% –∫—Ä–∞—â–µ, –ø—ñ–¥—Ç—Ä–∏–º—É—î –Ω–∞ 56% –±—ñ–ª—å—à–µ –≥—Ä–∞–≤—Ü—ñ–≤, —ñ –≤–∏ —Ä–æ–∑—É–º—ñ—î—Ç–µ —è–∫ –π–æ–≥–æ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ.

–¶—ñ –∑–Ω–∞–Ω–Ω—è –∫–æ—à—Ç—É—é—Ç—å $500-1000 –Ω–∞ —Ä–∏–Ω–∫—É server management. –í–∏ —Ç—ñ–ª—å–∫–∏ —â–æ –∑–∞–æ—â–∞–¥–∏–ª–∏ —ó—Ö! üí∞',
    4200,
    5,
    false
  );

  RAISE NOTICE 'Lesson 5 created!';
END $$;

SELECT l.title, l.order_index, l.duration, l.type
FROM course_lessons l
JOIN course_modules m ON m.id::text = l.module_id
WHERE m.course_id = 'paid-2' AND m.order_index = 1
ORDER BY l.order_index;
